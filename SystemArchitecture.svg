<svg viewBox="0 0 1400 1000" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1400" height="1000" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="700" y="40" text-anchor="middle" font-size="28" font-weight="bold" fill="#1a1a1a">FamilyHub System Architecture</text>
  
  <!-- Client Layer -->
  <g id="client-layer">
    <rect x="50" y="80" width="1300" height="200" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="8"/>
    <text x="60" y="105" font-size="18" font-weight="bold" fill="#1976d2">Client Layer</text>
    
    <!-- React App -->
    <rect x="100" y="120" width="400" height="140" fill="#ffffff" stroke="#2196f3" stroke-width="2" rx="4"/>
    <text x="300" y="145" text-anchor="middle" font-size="16" font-weight="bold" fill="#1976d2">React SPA</text>
    
    <!-- Pages -->
    <rect x="120" y="160" width="160" height="80" fill="#e1f5fe" stroke="#0288d1" stroke-width="1" rx="4"/>
    <text x="200" y="180" text-anchor="middle" font-size="12" font-weight="bold">Pages</text>
    <text x="200" y="195" text-anchor="middle" font-size="10">• FamilyLanding</text>
    <text x="200" y="208" text-anchor="middle" font-size="10">• CreateFamily</text>
    <text x="200" y="221" text-anchor="middle" font-size="10">• JoinFamily</text>
    <text x="200" y="234" text-anchor="middle" font-size="10">• Login • Dashboard</text>
    
    <!-- Components -->
    <rect x="300" y="160" width="180" height="80" fill="#e1f5fe" stroke="#0288d1" stroke-width="1" rx="4"/>
    <text x="390" y="180" text-anchor="middle" font-size="12" font-weight="bold">Components</text>
    <text x="390" y="195" text-anchor="middle" font-size="10">• GroceryList</text>
    <text x="390" y="208" text-anchor="middle" font-size="10">• Calendar</text>
    <text x="390" y="221" text-anchor="middle" font-size="10">• Lists</text>
    <text x="390" y="234" text-anchor="middle" font-size="10">• LoadingScreen</text>
    
    <!-- Context & Utils -->
    <rect x="550" y="120" width="200" height="140" fill="#ffffff" stroke="#2196f3" stroke-width="2" rx="4"/>
    <text x="650" y="145" text-anchor="middle" font-size="16" font-weight="bold" fill="#1976d2">Context and Utils</text>
    <rect x="570" y="160" width="160" height="80" fill="#e1f5fe" stroke="#0288d1" stroke-width="1" rx="4"/>
    <text x="650" y="180" text-anchor="middle" font-size="12" font-weight="bold">SocketContext</text>
    <text x="650" y="195" text-anchor="middle" font-size="10">• Real-time connection</text>
    <text x="650" y="208" text-anchor="middle" font-size="10">• Event handling</text>
    <text x="650" y="225" text-anchor="middle" font-size="12" font-weight="bold">Axios Instance</text>
    <text x="650" y="238" text-anchor="middle" font-size="10">• Auth interceptors</text>
    
    <!-- Styling -->
    <rect x="800" y="120" width="180" height="140" fill="#ffffff" stroke="#2196f3" stroke-width="2" rx="4"/>
    <text x="890" y="145" text-anchor="middle" font-size="16" font-weight="bold" fill="#1976d2">Styling</text>
    <rect x="820" y="160" width="140" height="80" fill="#e1f5fe" stroke="#0288d1" stroke-width="1" rx="4"/>
    <text x="890" y="180" text-anchor="middle" font-size="12" font-weight="bold">Tailwind CSS</text>
    <text x="890" y="195" text-anchor="middle" font-size="10">• Utility classes</text>
    <text x="890" y="210" text-anchor="middle" font-size="12" font-weight="bold">Custom CSS</text>
    <text x="890" y="225" text-anchor="middle" font-size="10">• Design system</text>
    <text x="890" y="238" text-anchor="middle" font-size="10">• Variables</text>
    
    <!-- Auth Flow -->
    <rect x="1030" y="120" width="280" height="140" fill="#ffffff" stroke="#2196f3" stroke-width="2" rx="4"/>
    <text x="1170" y="145" text-anchor="middle" font-size="16" font-weight="bold" fill="#1976d2">Authentication Flow</text>
    <rect x="1050" y="160" width="240" height="80" fill="#e1f5fe" stroke="#0288d1" stroke-width="1" rx="4"/>
    <text x="1170" y="180" text-anchor="middle" font-size="12" font-weight="bold">JWT Token Management</text>
    <text x="1170" y="195" text-anchor="middle" font-size="10">• localStorage persistence</text>
    <text x="1170" y="208" text-anchor="middle" font-size="10">• Protected routes</text>
    <text x="1170" y="221" text-anchor="middle" font-size="10">• Auto logout on 401</text>
    <text x="1170" y="234" text-anchor="middle" font-size="10">• Socket auth</text>
  </g>
  
  <!-- Communication Layer -->
  <g id="communication-layer">
    <rect x="50" y="310" width="1300" height="120" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="8"/>
    <text x="60" y="335" font-size="18" font-weight="bold" fill="#e65100">Communication Layer</text>
    
    <!-- HTTP/REST -->
    <rect x="150" y="350" width="400" height="60" fill="#ffffff" stroke="#ff9800" stroke-width="2" rx="4"/>
    <text x="350" y="375" text-anchor="middle" font-size="14" font-weight="bold" fill="#e65100">HTTP/REST API</text>
    <text x="350" y="395" text-anchor="middle" font-size="11">Axios → Express Routes </text>
    
    <!-- WebSocket -->
    <rect x="650" y="350" width="400" height="60" fill="#ffffff" stroke="#ff9800" stroke-width="2" rx="4"/>
    <text x="850" y="375" text-anchor="middle" font-size="14" font-weight="bold" fill="#e65100">WebSocket</text>
    <text x="850" y="395" text-anchor="middle" font-size="11">Socket.io Client ↔ Socket.io Server</text>
    
    <!-- CORS -->
    <rect x="1100" y="350" width="200" height="60" fill="#ffffff" stroke="#ff9800" stroke-width="2" rx="4"/>
    <text x="1200" y="375" text-anchor="middle" font-size="14" font-weight="bold" fill="#e65100">CORS</text>
    <text x="1200" y="395" text-anchor="middle" font-size="11">Multi-origin support</text>
  </g>
  
  <!-- Server Layer -->
  <g id="server-layer">
    <rect x="50" y="460" width="1300" height="320" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2" rx="8"/>
    <text x="60" y="485" font-size="18" font-weight="bold" fill="#1b5e20">Server Layer (Node.js/Express)</text>
    
    <!-- API Routes -->
    <rect x="100" y="500" width="280" height="250" fill="#ffffff" stroke="#4caf50" stroke-width="2" rx="4"/>
    <text x="240" y="525" text-anchor="middle" font-size="16" font-weight="bold" fill="#2e7d32">API Routes</text>
    
    <g>
      <rect x="120" y="540" width="240" height="40" fill="#f1f8e9" stroke="#689f38" stroke-width="1" rx="3"/>
      <text x="240" y="555" text-anchor="middle" font-size="11" font-weight="bold">Auth Routes</text>
      <text x="240" y="570" text-anchor="middle" font-size="9">/create-family, /join-family, /login</text>
    </g>
    
    <g>
      <rect x="120" y="590" width="240" height="40" fill="#f1f8e9" stroke="#689f38" stroke-width="1" rx="3"/>
      <text x="240" y="605" text-anchor="middle" font-size="11" font-weight="bold">User Routes</text>
      <text x="240" y="620" text-anchor="middle" font-size="9">/user, /family/members</text>
    </g>
    
    <g>
      <rect x="120" y="640" width="240" height="40" fill="#f1f8e9" stroke="#689f38" stroke-width="1" rx="3"/>
      <text x="240" y="655" text-anchor="middle" font-size="11" font-weight="bold">Feature Routes</text>
      <text x="240" y="670" text-anchor="middle" font-size="9">/grocery/*, /events/*, /lists/*</text>
    </g>
    
    <g>
      <rect x="120" y="690" width="240" height="40" fill="#f1f8e9" stroke="#689f38" stroke-width="1" rx="3"/>
      <text x="240" y="705" text-anchor="middle" font-size="11" font-weight="bold">CRUD Operations</text>
      <text x="240" y="720" text-anchor="middle" font-size="9">GET, POST, PUT, DELETE</text>
    </g>
    
    <!-- Middleware -->
    <rect x="420" y="500" width="280" height="250" fill="#ffffff" stroke="#4caf50" stroke-width="2" rx="4"/>
    <text x="560" y="525" text-anchor="middle" font-size="16" font-weight="bold" fill="#2e7d32">Middleware</text>
    
    <rect x="440" y="540" width="240" height="190" fill="#f1f8e9" stroke="#689f38" stroke-width="1" rx="3"/>
    <text x="560" y="560" text-anchor="middle" font-size="12" font-weight="bold">authenticateToken</text>
    <text x="560" y="575" text-anchor="middle" font-size="10">• JWT verification</text>
    <text x="560" y="590" text-anchor="middle" font-size="10">• User extraction</text>
    <text x="560" y="605" text-anchor="middle" font-size="10">• Family ID attachment</text>
    
    <text x="560" y="630" text-anchor="middle" font-size="12" font-weight="bold">Socket Auth</text>
    <text x="560" y="645" text-anchor="middle" font-size="10">• Token validation</text>
    <text x="560" y="660" text-anchor="middle" font-size="10">• Socket user/family binding</text>
    
    <text x="560" y="685" text-anchor="middle" font-size="12" font-weight="bold">CORS Handler</text>
    <text x="560" y="700" text-anchor="middle" font-size="10">• Origin validation</text>
    <text x="560" y="715" text-anchor="middle" font-size="10">• Preflight handling</text>
    
    <!-- Socket.io Events -->
    <rect x="740" y="500" width="280" height="250" fill="#ffffff" stroke="#4caf50" stroke-width="2" rx="4"/>
    <text x="880" y="525" text-anchor="middle" font-size="16" font-weight="bold" fill="#2e7d32">Socket.io Events</text>
    
    <rect x="760" y="540" width="240" height="190" fill="#f1f8e9" stroke="#689f38" stroke-width="1" rx="3"/>
    <text x="880" y="560" text-anchor="middle" font-size="11" font-weight="bold">Room Management</text>
    <text x="880" y="575" text-anchor="middle" font-size="10">• family:{familyId} rooms</text>
    <text x="880" y="590" text-anchor="middle" font-size="10">• list_{listId} rooms</text>
    
    <text x="880" y="615" text-anchor="middle" font-size="11" font-weight="bold">Grocery Events</text>
    <text x="880" y="630" text-anchor="middle" font-size="10">• grocery_item_added/updated/deleted</text>
    
    <text x="880" y="655" text-anchor="middle" font-size="11" font-weight="bold">Calendar Events</text>
    <text x="880" y="670" text-anchor="middle" font-size="10">• event_created/updated</text>
    
    <text x="880" y="695" text-anchor="middle" font-size="11" font-weight="bold">List Events</text>
    <text x="880" y="710" text-anchor="middle" font-size="10">• list_created/updated/deleted</text>
    <text x="880" y="725" text-anchor="middle" font-size="10">• list_item_added/updated/deleted</text>
    
    <!-- Services -->
    <rect x="1060" y="500" width="240" height="250" fill="#ffffff" stroke="#4caf50" stroke-width="2" rx="4"/>
    <text x="1180" y="525" text-anchor="middle" font-size="16" font-weight="bold" fill="#2e7d32">Services</text>
    
    <rect x="1080" y="540" width="200" height="190" fill="#f1f8e9" stroke="#689f38" stroke-width="1" rx="3"/>
    <text x="1180" y="560" text-anchor="middle" font-size="11" font-weight="bold">Authentication</text>
    <text x="1180" y="575" text-anchor="middle" font-size="10">• bcrypt hashing</text>
    <text x="1180" y="590" text-anchor="middle" font-size="10">• JWT generation</text>
    <text x="1180" y="605" text-anchor="middle" font-size="10">• Join code generation</text>
    
    <text x="1180" y="635" text-anchor="middle" font-size="11" font-weight="bold">Data Validation</text>
    <text x="1180" y="650" text-anchor="middle" font-size="10">• Input sanitization</text>
    <text x="1180" y="665" text-anchor="middle" font-size="10">• Schema validation</text>
    
    <text x="1180" y="695" text-anchor="middle" font-size="11" font-weight="bold">Real-time Sync</text>
    <text x="1180" y="710" text-anchor="middle" font-size="10">• Event broadcasting</text>
    <text x="1180" y="725" text-anchor="middle" font-size="10">• Room notifications</text>
  </g>
  
  <!-- Database Layer -->
  <g id="database-layer">
    <rect x="50" y="810" width="1300" height="160" fill="#fce4ec" stroke="#c2185b" stroke-width="2" rx="8"/>
    <text x="60" y="835" font-size="18" font-weight="bold" fill="#880e4f">Database Layer (MongoDB/Mongoose)</text>
    
    <!-- Models -->
    <rect x="150" y="850" width="180" height="100" fill="#ffffff" stroke="#e91e63" stroke-width="2" rx="4"/>
    <text x="240" y="870" text-anchor="middle" font-size="14" font-weight="bold" fill="#880e4f">User Model</text>
    <text x="240" y="885" text-anchor="middle" font-size="10">• fullName, email</text>
    <text x="240" y="898" text-anchor="middle" font-size="10">• password (hashed)</text>
    <text x="240" y="911" text-anchor="middle" font-size="10">• familyId (ref)</text>
    <text x="240" y="924" text-anchor="middle" font-size="10">• role, lastActive</text>
    <text x="240" y="937" text-anchor="middle" font-size="10">• profilePicture</text>
    
    <rect x="370" y="850" width="180" height="100" fill="#ffffff" stroke="#e91e63" stroke-width="2" rx="4"/>
    <text x="460" y="870" text-anchor="middle" font-size="14" font-weight="bold" fill="#880e4f">Family Model</text>
    <text x="460" y="885" text-anchor="middle" font-size="10">• name</text>
    <text x="460" y="898" text-anchor="middle" font-size="10">• joinCode (unique)</text>
    <text x="460" y="911" text-anchor="middle" font-size="10">• createdBy (ref)</text>
    <text x="460" y="924" text-anchor="middle" font-size="10">• members[]</text>
    <text x="460" y="937" text-anchor="middle" font-size="10">• settings</text>
    
    <rect x="590" y="850" width="180" height="100" fill="#ffffff" stroke="#e91e63" stroke-width="2" rx="4"/>
    <text x="680" y="870" text-anchor="middle" font-size="14" font-weight="bold" fill="#880e4f">GroceryItem Model</text>
    <text x="680" y="885" text-anchor="middle" font-size="10">• name, quantity, unit</text>
    <text x="680" y="898" text-anchor="middle" font-size="10">• category, priority</text>
    <text x="680" y="911" text-anchor="middle" font-size="10">• completed status</text>
    <text x="680" y="924" text-anchor="middle" font-size="10">• assignedTo (ref)</text>
    <text x="680" y="937" text-anchor="middle" font-size="10">• recurring info</text>
    
    <rect x="810" y="850" width="180" height="100" fill="#ffffff" stroke="#e91e63" stroke-width="2" rx="4"/>
    <text x="900" y="870" text-anchor="middle" font-size="14" font-weight="bold" fill="#880e4f">Event Model</text>
    <text x="900" y="885" text-anchor="middle" font-size="10">• title, description</text>
    <text x="900" y="898" text-anchor="middle" font-size="10">• start/end dates</text>
    <text x="900" y="911" text-anchor="middle" font-size="10">• attendees[] + RSVP</text>
    <text x="900" y="924" text-anchor="middle" font-size="10">• location, category</text>
    <text x="900" y="937" text-anchor="middle" font-size="10">• recurring pattern</text>
    
    <rect x="1030" y="850" width="180" height="100" fill="#ffffff" stroke="#e91e63" stroke-width="2" rx="4"/>
    <text x="1120" y="870" text-anchor="middle" font-size="14" font-weight="bold" fill="#880e4f">List Model</text>
    <text x="1120" y="885" text-anchor="middle" font-size="10">• title, description</text>
    <text x="1120" y="898" text-anchor="middle" font-size="10">• color, icon</text>
    <text x="1120" y="911" text-anchor="middle" font-size="10">• items[] (subdoc)</text>
    <text x="1120" y="924" text-anchor="middle" font-size="10">• createdBy (ref)</text>
    <text x="1120" y="937" text-anchor="middle" font-size="10">• timestamps</text>
  </g>
  
  <!-- Connection Lines -->
  <g id="connections">
    <!-- Client to Communication -->
    <line x1="300" y1="280" x2="300" y2="310" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="650" y1="280" x2="650" y2="310" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="890" y1="280" x2="890" y2="310" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="1170" y1="280" x2="1170" y2="310" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- Communication to Server -->
    <line x1="350" y1="430" x2="240" y2="460" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="850" y1="430" x2="880" y2="460" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- Server Internal -->
    <line x1="380" y1="625" x2="420" y2="625" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="700" y1="625" x2="740" y2="625" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="1020" y1="625" x2="1060" y2="625" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- Server to Database -->
    <line x1="240" y1="780" x2="240" y2="810" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="460" y1="780" x2="460" y2="810" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="680" y1="780" x2="680" y2="810" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="900" y1="780" x2="900" y2="810" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="1120" y1="780" x2="1120" y2="810" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  </g>
  
  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>
  
  <!-- Data Flow Labels -->
  <g id="flow-labels">
    <text x="320" y="300" font-size="10" fill="#666" transform="rotate(-90 320 300)">REST API</text>
    <text x="670" y="300" font-size="10" fill="#666" transform="rotate(-90 670 300)">WebSocket</text>
    <text x="910" y="300" font-size="10" fill="#666" transform="rotate(-90 910 300)">Styles</text>
    <text x="1190" y="300" font-size="10" fill="#666" transform="rotate(-90 1190 300)">Auth</text>
  </g>
</svg>